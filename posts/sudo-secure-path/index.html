<!DOCTYPE html><html> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><!-- KaTeX --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css" integrity="sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib" crossorigin="anonymous"><!-- Prism --><link href="/src/assets/prism.css" rel="stylesheet"><script type="module" src="/_astro/Layout.astro_astro_type_script_index_0_lang.BC0---Bx.js"></script><meta name="generator" content="Astro v5.1.7"><title></title><link rel="stylesheet" href="/_astro/index.BCGfv0ZA.css"></head> <body class="bg-[#333] text-[#ddd]"> <h1>Sustie</h1> <div class="flex gap-4"> <a href="/">主页</a> <a href="/posts/page/1">所有文章</a> <a href="/search/">文章检索</a> </div>  <h1>关于sudo的secure_path设置</h1> <p>sudo 有一个名为<code>secure_path</code>的设置，从 sudo 1.9.16 开始，<code>secure_path</code>设置会默认启用。<a href="https://www.sudo.ws/posts/2024/09/why-sudo-1.9.16-enables-secure_path-by-default/">官方博客</a>介绍了这个改动的原因。</p> <p>当使用 sudo 执行命令的时候，用户当前的环境变量会被修改。其中<code>PATH</code>会被设置为<code>secure_path</code>的值。因此，经常会发生加了<code>sudo</code>之后就找不到命令的情况。解决方法也是非常的简单，要么修改<code>secure_path</code>的值，要么直接删除这个设置，这样 sudo 就不会修改<code>PATH</code>了。</p> <p>运行<code>sudo visudo</code>，然后删除或者修改下面这一行即可。</p> <pre><code>Defaults        secure_path=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin&quot;
</code></pre><p>还有一种方法是使用绝对路径来运行命令，可以用<code>which</code>命令来查看命令的绝对路径。下面是一个例子。</p> <pre><code class="language-bash">sudo $(which COMMAND)
</code></pre>  </body></html>